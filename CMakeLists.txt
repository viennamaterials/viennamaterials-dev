PROJECT(ViennaMaterials)

cmake_minimum_required(VERSION 2.6)

INCLUDE_DIRECTORIES(".")

list(APPEND CMAKE_MODULE_PATH "${PROJECT_SOURCE_DIR}/cmake")

#set default build type 
IF (NOT CMAKE_BUILD_TYPE)
  SET(CMAKE_BUILD_TYPE "Release")
ENDIF()

#set compiler flags
SET(CMAKE_CXX_FLAGS "-Wall -pedantic")
SET(CMAKE_CXX_FLAGS_RELWITHDEBINFO "-O2 -g")
SET(CMAKE_CXX_FLAGS_RELEASE "-O2")
SET(CMAKE_CXX_FLAGS_DEBUG  "-O0 -g")

INCLUDE(external/ViennaUtils/UseViennaUtils.cmake)

#INCLUDE(external/ViennaIPD/UseViennaIPD.cmake)
#ADD_DEFINITIONS(-DHAVE_VIENNAIPD)
#SET(LIBRARIES ${LIBRARIES} ${VIENNAIPDLIB})

#INCLUDE(external/UseUDUNITS.cmake)
#ADD_DEFINITIONS(-DHAVE_UDUNITS)
#SET(LIBRARIES ${LIBRARIES} ${UDUNITSLIB})

FIND_PACKAGE(LibXml2)
IF(LIBXML2_FOUND)
  INCLUDE_DIRECTORIES(${LIBXML2_INCLUDE_DIR})
  SET(LIBRARIES ${LIBRARIES} ${LIBXML2_LIBRARIES}) 
  ADD_DEFINITIONS(-DHAVE_LIBXML2)
ENDIF(LIBXML2_FOUND)

MESSAGE(STATUS "Libraries to be linked: "${LIBRARIES})

# build the ViennaMaterials library
AUX_SOURCE_DIRECTORY(src/ LIBSOURCES) 
ADD_LIBRARY(viennamaterials SHARED ${LIBSOURCES})
SET(LIBRARIES ${LIBRARIES} viennamaterials)

ADD_SUBDIRECTORY(examples)
